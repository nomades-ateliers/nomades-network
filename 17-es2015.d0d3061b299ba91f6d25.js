(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{boDV:function(n,l,t){"use strict";t.r(l);var e=t("kZht");class u{}var i=t("C9Ky"),a=t("yY9A"),o=t("s/1W"),r=t("An66"),s=t("3kIJ"),c=t("YtkY"),b=t("ETkI"),d=t("l2r0");class p extends d.a{constructor(n){super(),this.store=n,this.STATE="authCheck"}dispatchCheckAuthAction(){this.dispatchAction(new b.b)}dispatchLoginAction(n){this.dispatchAction(new b.h(n))}dispatchLogoutAction(){this.dispatchAction(new b.j)}dispatchCreateAction(n){this.dispatchAction(new b.e(n))}dispatchTokenSaveAction(){this.dispatchAction(new b.m)}dispatchTokenDeleteAction(){this.dispatchAction(new b.l)}dispatchLoadAction(n){}dispatchUpdateAction(n){}dispatchRemoveAction(n){}getAuthCheck(){return this.storeSelectFeatureState().pipe(Object(c.a)(n=>n))}isAuthenticated(){let n=!1;return this.getAuthCheck().subscribe(l=>n=l),n}}class g{constructor(n){this._store=n,this.loginBtn=!0}ngOnInit(){this.authForm=new s.f({email:new s.d("demo@demo.ch",s.p.compose([s.p.required,s.p.email])),password:new s.d("A123456",s.p.compose([s.p.required,s.p.minLength(6)])),firstname:new s.d("",s.p.compose(this.loginBtn?[]:[s.p.required,s.p.minLength(6)])),lastname:new s.d("",s.p.compose(this.loginBtn?[]:[s.p.required,s.p.minLength(6)]))})}send(n="login"){if(this.authForm.valid)switch(!0){case"login"===n:this._store.dispatchLoginAction(this.authForm.value);break;case"create"===n:this._store.dispatchCreateAction(this.authForm.value)}else console.log("form not valid",this.authForm.valid)}}class h extends g{constructor(n){super(n),this.loginBtn=!0}}var m=e.Ab({encapsulation:2,styles:[["nomades-network-auth-page ion-img{max-width:200px;margin:0 auto 2rem}nomades-network-auth-page .flex-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;flex-wrap:nowrap;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;align-content:stretch;height:100%}nomades-network-auth-page .flex-container .center-content{width:100%}nomades-network-auth-page .flex-container .center-content h1{margin-top:0;line-height:3rem;font-weight:400;border-bottom:solid 1px var(--ion-color-primary)}nomades-network-auth-page .flex-container .center-content.margin-login{margin-top:6rem!important}nomades-network-auth-page .flex-container .footer{width:100%}"]],data:{}});function C(n){return e.Wb(0,[(n()(),e.Cb(0,0,null,null,1,"ion-img",[["src","./assets/images/logo-nomades.png"]],null,null,null,a.R,a.n)),e.Bb(1,49152,null,0,o.B,[e.j,e.p,e.G],{src:[0,"src"]},null)],(function(n,l){n(l,1,0,"./assets/images/logo-nomades.png")}),null)}function f(n){return e.Wb(0,[(n()(),e.Cb(0,0,null,null,3,"ion-text",[["color","primary"]],null,null,null,a.fb,a.B)),e.Bb(1,49152,null,0,o.vb,[e.j,e.p,e.G],{color:[0,"color"]},null),(n()(),e.Cb(2,0,null,0,1,"h1",[],null,null,null,null,null)),(n()(),e.Ub(-1,null,[" Cr\xe9ation de compte "]))],(function(n,l){n(l,1,0,"primary")}),null)}function j(n){return e.Wb(0,[(n()(),e.Cb(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),e.Ub(-1,null,["Vous avez d\xe9ja un compte?"])),(n()(),e.Cb(2,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function v(n){return e.Wb(0,[(n()(),e.Cb(0,0,null,null,3,"ion-note",[["class","ion-text-left"]],null,null,null,a.Z,a.v)),e.Bb(1,49152,null,0,o.W,[e.j,e.p,e.G],null,null),(n()(),e.Cb(2,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),e.Ub(-1,null,[" Nomades tribes est l'association des \xe9l\xe8ves, des alumnis et des enseignants Nomades qui permet de partager, communiquer et collaborer. Cr\xe9ons ensemble notre monde de demain. "]))],null,null)}function B(n){return e.Wb(0,[(n()(),e.Cb(0,0,null,null,78,"ion-content",[["class","ion-padding"]],null,null,null,a.M,a.i)),e.Bb(1,49152,null,0,o.s,[e.j,e.p,e.G],null,null),(n()(),e.Cb(2,0,null,0,76,"div",[["class","flex-container"]],null,null,null,null,null)),(n()(),e.Cb(3,0,null,null,65,"div",[],null,null,null,null,null)),e.Rb(512,null,r.t,r.u,[e.y,e.z,e.p,e.L]),e.Bb(5,278528,null,0,r.j,[r.t],{ngClass:[0,"ngClass"]},null),e.Pb(6,{"center-content":0,"margin-login":1}),(n()(),e.rb(16777216,null,null,1,null,C)),e.Bb(8,16384,null,0,r.l,[e.X,e.T],{ngIf:[0,"ngIf"]},null),(n()(),e.rb(16777216,null,null,1,null,f)),e.Bb(10,16384,null,0,r.l,[e.X,e.T],{ngIf:[0,"ngIf"]},null),(n()(),e.Cb(11,0,null,null,57,"form",[["class","ion-text-center ion-margin-bottom"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(n,l,t){var u=!0;return"submit"===l&&(u=!1!==e.Nb(n,13).onSubmit(t)&&u),"reset"===l&&(u=!1!==e.Nb(n,13).onReset()&&u),u}),null,null)),e.Bb(12,16384,null,0,s.t,[],null,null),e.Bb(13,540672,null,0,s.g,[[8,null],[8,null]],{form:[0,"form"]},null),e.Rb(2048,null,s.a,null,[s.g]),e.Bb(15,16384,null,0,s.m,[[4,s.a]],null,null),(n()(),e.Cb(16,0,null,null,24,"div",[],[[8,"hidden",0]],null,null,null,null)),(n()(),e.Cb(17,0,null,null,11,"ion-item",[],null,null,null,a.T,a.p)),e.Bb(18,49152,null,0,o.F,[e.j,e.p,e.G],null,null),(n()(),e.Cb(19,0,null,0,2,"ion-label",[],null,null,null,a.U,a.q)),e.Bb(20,49152,null,0,o.L,[e.j,e.p,e.G],null,null),(n()(),e.Ub(-1,0,["Nom:"])),(n()(),e.Cb(22,0,null,0,6,"ion-input",[["formControlName","lastname"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,l,t){var u=!0;return"ionBlur"===l&&(u=!1!==e.Nb(n,24)._handleBlurEvent(t.target)&&u),"ionChange"===l&&(u=!1!==e.Nb(n,24)._handleInputEvent(t.target)&&u),u}),a.S,a.o)),e.Bb(23,49152,null,0,o.E,[e.j,e.p,e.G],{type:[0,"type"]},null),e.Bb(24,16384,null,0,o.Kb,[e.p],null,null),e.Rb(1024,null,s.j,(function(n){return[n]}),[o.Kb]),e.Bb(26,671744,null,0,s.e,[[3,s.a],[8,null],[8,null],[6,s.j],[2,s.s]],{name:[0,"name"]},null),e.Rb(2048,null,s.k,null,[s.e]),e.Bb(28,16384,null,0,s.l,[[4,s.k]],null,null),(n()(),e.Cb(29,0,null,null,11,"ion-item",[],null,null,null,a.T,a.p)),e.Bb(30,49152,null,0,o.F,[e.j,e.p,e.G],null,null),(n()(),e.Cb(31,0,null,0,2,"ion-label",[],null,null,null,a.U,a.q)),e.Bb(32,49152,null,0,o.L,[e.j,e.p,e.G],null,null),(n()(),e.Ub(-1,0,["Pr\xe9nom:"])),(n()(),e.Cb(34,0,null,0,6,"ion-input",[["formControlName","firstname"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,l,t){var u=!0;return"ionBlur"===l&&(u=!1!==e.Nb(n,36)._handleBlurEvent(t.target)&&u),"ionChange"===l&&(u=!1!==e.Nb(n,36)._handleInputEvent(t.target)&&u),u}),a.S,a.o)),e.Bb(35,49152,null,0,o.E,[e.j,e.p,e.G],{type:[0,"type"]},null),e.Bb(36,16384,null,0,o.Kb,[e.p],null,null),e.Rb(1024,null,s.j,(function(n){return[n]}),[o.Kb]),e.Bb(38,671744,null,0,s.e,[[3,s.a],[8,null],[8,null],[6,s.j],[2,s.s]],{name:[0,"name"]},null),e.Rb(2048,null,s.k,null,[s.e]),e.Bb(40,16384,null,0,s.l,[[4,s.k]],null,null),(n()(),e.Cb(41,0,null,null,11,"ion-item",[],null,null,null,a.T,a.p)),e.Bb(42,49152,null,0,o.F,[e.j,e.p,e.G],null,null),(n()(),e.Cb(43,0,null,0,2,"ion-label",[],null,null,null,a.U,a.q)),e.Bb(44,49152,null,0,o.L,[e.j,e.p,e.G],null,null),(n()(),e.Ub(-1,0,["Email:"])),(n()(),e.Cb(46,0,null,0,6,"ion-input",[["formControlName","email"],["type","email"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,l,t){var u=!0;return"ionBlur"===l&&(u=!1!==e.Nb(n,48)._handleBlurEvent(t.target)&&u),"ionChange"===l&&(u=!1!==e.Nb(n,48)._handleInputEvent(t.target)&&u),u}),a.S,a.o)),e.Bb(47,49152,null,0,o.E,[e.j,e.p,e.G],{type:[0,"type"]},null),e.Bb(48,16384,null,0,o.Kb,[e.p],null,null),e.Rb(1024,null,s.j,(function(n){return[n]}),[o.Kb]),e.Bb(50,671744,null,0,s.e,[[3,s.a],[8,null],[8,null],[6,s.j],[2,s.s]],{name:[0,"name"]},null),e.Rb(2048,null,s.k,null,[s.e]),e.Bb(52,16384,null,0,s.l,[[4,s.k]],null,null),(n()(),e.Cb(53,0,null,null,11,"ion-item",[],null,null,null,a.T,a.p)),e.Bb(54,49152,null,0,o.F,[e.j,e.p,e.G],null,null),(n()(),e.Cb(55,0,null,0,2,"ion-label",[],null,null,null,a.U,a.q)),e.Bb(56,49152,null,0,o.L,[e.j,e.p,e.G],null,null),(n()(),e.Ub(-1,0,["Password:"])),(n()(),e.Cb(58,0,null,0,6,"ion-input",[["formControlName","password"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,l,t){var u=!0;return"ionBlur"===l&&(u=!1!==e.Nb(n,60)._handleBlurEvent(t.target)&&u),"ionChange"===l&&(u=!1!==e.Nb(n,60)._handleInputEvent(t.target)&&u),u}),a.S,a.o)),e.Bb(59,49152,null,0,o.E,[e.j,e.p,e.G],{type:[0,"type"]},null),e.Bb(60,16384,null,0,o.Kb,[e.p],null,null),e.Rb(1024,null,s.j,(function(n){return[n]}),[o.Kb]),e.Bb(62,671744,null,0,s.e,[[3,s.a],[8,null],[8,null],[6,s.j],[2,s.s]],{name:[0,"name"]},null),e.Rb(2048,null,s.k,null,[s.e]),e.Bb(64,16384,null,0,s.l,[[4,s.k]],null,null),(n()(),e.Cb(65,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),e.Cb(66,0,null,null,2,"ion-button",[["class","ion-margin-top"]],null,[[null,"click"]],(function(n,l,t){var e=!0,u=n.component;return"click"===l&&(e=!1!==u.send(u.loginBtn?"login":"create")&&e),e}),a.F,a.b)),e.Bb(67,49152,null,0,o.i,[e.j,e.p,e.G],null,null),(n()(),e.Ub(68,0,[" "," "])),(n()(),e.Cb(69,0,null,null,9,"div",[["class","footer"]],null,null,null,null,null)),(n()(),e.Cb(70,0,null,null,6,"ion-note",[["class","ion-text-center"]],null,null,null,a.Z,a.v)),e.Bb(71,49152,null,0,o.W,[e.j,e.p,e.G],null,null),(n()(),e.Cb(72,0,null,0,4,"p",[],null,null,null,null,null)),(n()(),e.rb(16777216,null,null,1,null,j)),e.Bb(74,16384,null,0,r.l,[e.X,e.T],{ngIf:[0,"ngIf"]},null),(n()(),e.Cb(75,0,null,null,1,"a",[["class","ion-color-light"],["href","#"]],null,[[null,"click"]],(function(n,l,t){var e=!0,u=n.component;return"click"===l&&(t.preventDefault(),e=0!=(u.loginBtn=!u.loginBtn)&&e),e}),null,null)),(n()(),e.Ub(76,null,[" "," "])),(n()(),e.rb(16777216,null,null,1,null,v)),e.Bb(78,16384,null,0,r.l,[e.X,e.T],{ngIf:[0,"ngIf"]},null)],(function(n,l){var t=l.component,e=n(l,6,0,!0,t.loginBtn);n(l,5,0,e),n(l,8,0,t.loginBtn),n(l,10,0,!t.loginBtn),n(l,13,0,t.authForm),n(l,23,0,"text"),n(l,26,0,"lastname"),n(l,35,0,"text"),n(l,38,0,"firstname"),n(l,47,0,"email"),n(l,50,0,"email"),n(l,59,0,"password"),n(l,62,0,"password"),n(l,74,0,!t.loginBtn),n(l,78,0,t.loginBtn)}),(function(n,l){var t=l.component;n(l,11,0,e.Nb(l,15).ngClassUntouched,e.Nb(l,15).ngClassTouched,e.Nb(l,15).ngClassPristine,e.Nb(l,15).ngClassDirty,e.Nb(l,15).ngClassValid,e.Nb(l,15).ngClassInvalid,e.Nb(l,15).ngClassPending),n(l,16,0,t.loginBtn),n(l,22,0,e.Nb(l,28).ngClassUntouched,e.Nb(l,28).ngClassTouched,e.Nb(l,28).ngClassPristine,e.Nb(l,28).ngClassDirty,e.Nb(l,28).ngClassValid,e.Nb(l,28).ngClassInvalid,e.Nb(l,28).ngClassPending),n(l,34,0,e.Nb(l,40).ngClassUntouched,e.Nb(l,40).ngClassTouched,e.Nb(l,40).ngClassPristine,e.Nb(l,40).ngClassDirty,e.Nb(l,40).ngClassValid,e.Nb(l,40).ngClassInvalid,e.Nb(l,40).ngClassPending),n(l,46,0,e.Nb(l,52).ngClassUntouched,e.Nb(l,52).ngClassTouched,e.Nb(l,52).ngClassPristine,e.Nb(l,52).ngClassDirty,e.Nb(l,52).ngClassValid,e.Nb(l,52).ngClassInvalid,e.Nb(l,52).ngClassPending),n(l,58,0,e.Nb(l,64).ngClassUntouched,e.Nb(l,64).ngClassTouched,e.Nb(l,64).ngClassPristine,e.Nb(l,64).ngClassDirty,e.Nb(l,64).ngClassValid,e.Nb(l,64).ngClassInvalid,e.Nb(l,64).ngClassPending),n(l,68,0,t.loginBtn?"Se connecter":"Cr\xe9er un compte"),n(l,76,0,t.loginBtn?"Creer mon compte":"Se connecter avec un compte existant")}))}function O(n){return e.Wb(0,[(n()(),e.Cb(0,0,null,null,1,"nomades-network-auth-page",[],null,null,null,B,m)),e.Bb(1,114688,null,0,h,[p],null,null)],(function(n,l){n(l,1,0)}),null)}var y=e.yb("nomades-network-auth-page",h,O,{},{},[]),w=t("ofez"),N=t("FUUT");const L=!1;function _(n=L,l){switch(l.type){case b.a.LOGIN_SUCCESS:case b.a.CHECK_AUTH_SUCCESS:return!0;case b.a.ERROR:case b.a.CHECK_AUTH_NO_USER:case b.a.TOKEN_DELETE:return!1;case b.a.LOGOUT_SUCCESS:return L;default:return n}}var k=t("D57K"),A=t("DyCy"),E=t("TLy2"),U=t("4e/d"),S=t("w0kG"),x=t("8j5Y"),T=t("ROBh"),G=t("qZtG"),I=t("gB8p");let R=(()=>{class n{constructor(n,l,t,e,u){this._action$=n,this._auth=l,this._router=t,this._route=e,this._store=u,this.loginAction$=this._action$.pipe(Object(A.f)(b.a.LOGIN),Object(E.a)(n=>this._auth.doAuth(n.payload)),Object(E.a)(n=>n.currentUser?Object(T.a)(new b.i(n)):this._handleErrors(n)),Object(U.a)(n=>Object(T.a)(new b.g(n)))),this.checkMainAction$=this._action$.pipe(Object(A.f)(b.a.CHECK_AUTH),Object(S.a)(this._store.pipe(Object(w.z)(n=>n.currentUser))),Object(E.a)(n=>{const[l,t=null]=n;return this._auth.isAuth(l.payload)}),Object(E.a)(n=>n.currentUser?Object(G.a)(Object(T.a)(new b.d(n),new I.c({currentUser:n.currentUser}))):Object(G.a)(Object(T.a)(new b.c))),Object(x.a)(n=>console.log("in effect ...")),Object(U.a)(n=>this._handleErrors(n))),this.logoutAction$=this._action$.pipe(Object(A.f)(b.a.LOGOUT),Object(E.a)(()=>this._auth.doLogout()),Object(E.a)(n=>Object(G.a)(Object(T.a)(new b.l,new b.k))),Object(E.a)(n=>(this._router.navigate(["/auth"]),Object(T.a)(n))),Object(U.a)(n=>this._handleErrors(n))),this.createUserAction$=this._action$.pipe(Object(A.f)(b.a.CREATE),Object(E.a)(n=>this._auth.doCreateUser(n.payload)),Object(E.a)(n=>n.currentUser?Object(T.a)(new b.f(n)):this._handleErrors(n)),Object(U.a)(n=>this._handleErrors(n))),this.createUserSuccessAction$=this._action$.pipe(Object(A.f)(b.a.CREATE_SUCCESS),Object(E.a)(n=>n&&n.payload?Object(T.a)(new b.n(n.payload),new b.b):this._handleErrors({message:"No payload or no user data on payload"})),Object(x.a)(n=>k.b(this,void 0,void 0,(function*(){yield this._router.navigate(["./confirme"]).catch(n=>n)}))),Object(U.a)(n=>this._handleErrors(n))),this.userSuccessAction$=this._action$.pipe(Object(A.f)(b.a.LOGIN_SUCCESS),Object(E.a)(n=>{const{payload:l=null}=n;return l?Object(G.a)(Object(T.a)(new b.n(l)),Object(T.a)(new b.b)):this._handleErrors()}),Object(U.a)(n=>this._handleErrors(n)),Object(x.a)(n=>{this._router.navigate(["/index"])}))}_handleErrors(n={message:null}){return Object(G.a)(Object(T.a)(new b.g(n)))}}return k.c([Object(A.b)(),k.f("design:type",Object)],n.prototype,"loginAction$",void 0),k.c([Object(A.b)(),k.f("design:type",Object)],n.prototype,"checkMainAction$",void 0),k.c([Object(A.b)(),k.f("design:type",Object)],n.prototype,"logoutAction$",void 0),k.c([Object(A.b)(),k.f("design:type",Object)],n.prototype,"createUserAction$",void 0),k.c([Object(A.b)(),k.f("design:type",Object)],n.prototype,"createUserSuccessAction$",void 0),k.c([Object(A.b)(),k.f("design:type",Object)],n.prototype,"userSuccessAction$",void 0),n})();var $=t("Zx/g"),K=t("1VvW"),q=t("SKbq");class F{constructor(n){Object(q.a)(n,"AuthStoreModule")}}var P=t("SYbc");class D{}t.d(l,"AuthModuleNgFactory",(function(){return W}));var W=e.zb(u,[],(function(n){return e.Kb([e.Lb(512,e.m,e.kb,[[8,[i.a,y]],[3,e.m],e.E]),e.Lb(4608,r.n,r.m,[e.A,[2,r.w]]),e.Lb(4608,o.b,o.b,[e.G,e.g]),e.Lb(4608,o.Eb,o.Eb,[o.b,e.m,e.x]),e.Lb(4608,o.Hb,o.Hb,[o.b,e.m,e.x]),e.Lb(4608,s.c,s.c,[]),e.Lb(4608,s.r,s.r,[]),e.Lb(4608,p,p,[w.o]),e.Lb(1073742336,r.c,r.c,[]),e.Lb(1073742336,o.Cb,o.Cb,[]),e.Lb(1073742336,N.a,N.a,[]),e.Lb(1073742336,s.q,s.q,[]),e.Lb(1073742336,s.n,s.n,[]),e.Lb(1024,w.J,(function(){return[{}]}),[]),e.Lb(1024,w.k,(function(){return[{key:"auth",reducerFactory:w.v,metaReducers:[],initialState:void 0}]}),[]),e.Lb(1024,w.K,w.Q,[e.x,w.J,w.k]),e.Lb(1024,w.I,(function(){return[_]}),[]),e.Lb(1024,w.L,(function(n){return[n]}),[w.I]),e.Lb(1024,w.b,(function(n,l,t){return[w.R(n,l,t)]}),[e.x,w.I,w.L]),e.Lb(1073873408,w.p,w.p,[w.K,w.b,w.h,w.r]),e.Lb(512,R,R,[A.a,$.a,K.m,K.a,w.o]),e.Lb(1024,A.k,(function(n){return[A.g(n)]}),[R]),e.Lb(1073742336,A.d,A.d,[A.e,A.k,[2,w.r],[2,w.p]]),e.Lb(1073742336,w.q,w.q,[]),e.Lb(1073742336,F,F,[[3,F]]),e.Lb(1073742336,K.p,K.p,[[2,K.u],[2,K.m]]),e.Lb(1073742336,D,D,[]),e.Lb(1073742336,u,u,[]),e.Lb(1024,K.k,(function(){return[[{path:"",component:h,canActivate:[P.a]}]]}),[])])}))}}]);